<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CEE MVP - Contextual Evaluation Engine</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f8fafc;
            color: #334155;
            line-height: 1.6;
        }
        
        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 0;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        
        .header h1 { font-size: 2rem; font-weight: 700; margin-bottom: 8px; }
        .header p { opacity: 0.9; font-size: 1.1rem; }
        
        .nav-tabs {
            background: white;
            border-bottom: 1px solid #e2e8f0;
            padding: 0 20px;
            display: flex;
            gap: 0;
        }
        
        .nav-tab {
            padding: 16px 24px;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            color: #64748b;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .nav-tab:hover { color: #475569; background-color: #f8fafc; }
        .nav-tab.active { color: #6366f1; border-bottom-color: #6366f1; background-color: #fefefe; }
        
        .content { padding: 24px 0; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }  
      
        .card {
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
            border: 1px solid #e2e8f0;
        }
        
        .card h3 { color: #1e293b; font-size: 1.25rem; font-weight: 600; margin-bottom: 16px; }
        
        .trust-score { text-align: center; padding: 20px; }
        .trust-score-value { font-size: 4rem; font-weight: 700; color: #059669; margin-bottom: 8px; }
        .trust-score-label { font-size: 1.1rem; color: #6b7280; margin-bottom: 16px; }
        
        .trust-score-breakdown {
            display: flex;
            justify-content: space-between;
            gap: 12px;
            margin-top: 20px;
        }
        
        .tier-score {
            flex: 1;
            text-align: center;
            padding: 12px;
            background-color: #f8fafc;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
        }
        
        .tier-score-value { font-size: 1.5rem; font-weight: 600; color: #374151; }
        .tier-score-label { font-size: 0.875rem; color: #6b7280; margin-top: 4px; }
        
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .status-green { background-color: #10b981; }
        .status-yellow { background-color: #f59e0b; }
        .status-red { background-color: #ef4444; }
        
        .form-group { margin-bottom: 24px; }
        .form-label { display: block; font-weight: 500; color: #374151; margin-bottom: 8px; }
        
        .form-input, .form-textarea, .form-select {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
        }
        
        .form-input:focus, .form-textarea:focus, .form-select:focus {
            outline: none;
            border-color: #6366f1;
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }
        
        .form-textarea { resize: vertical; min-height: 120px; }    
    
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 12px 24px;
            font-size: 1rem;
            font-weight: 500;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-decoration: none;
        }
        
        .btn-primary { background-color: #6366f1; color: white; }
        .btn-primary:hover { background-color: #5855eb; transform: translateY(-1px); }
        .btn-secondary { background-color: #e2e8f0; color: #475569; }
        .btn-secondary:hover { background-color: #cbd5e1; }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background-color: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
            margin: 12px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #10b981 0%, #059669 100%);
            border-radius: 4px;
            transition: width 0.3s ease;
        }
        
        .evaluation-results {
            display: none;
            margin-top: 32px;
            padding: 24px;
            background-color: #f0f9ff;
            border-radius: 12px;
            border: 1px solid #bae6fd;
        }
        
        .dimension-scores {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-top: 20px;
        }
        
        .dimension-item {
            background: white;
            padding: 16px;
            border-radius: 8px;
            text-align: center;
        }
        
        .dimension-score { font-size: 1.5rem; font-weight: 600; color: #1e293b; margin-bottom: 4px; }
        .dimension-name { font-size: 0.875rem; color: #64748b; }
        
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid #f3f4f6;
            border-radius: 50%;
            border-top-color: #6366f1;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin { to { transform: rotate(360deg); } }
        .hidden { display: none; }
        
        .alert {
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 16px;
        }
        
        .alert-success { background-color: #d1fae5; border: 1px solid #a7f3d0; color: #065f46; }
        .alert-warning { background-color: #fef3c7; border: 1px solid #fde68a; color: #92400e; }
    </style>
</head><body>

    <header class="header">
        <div class="container">
            <h1>Contextual Evaluation Engine (CEE)</h1>
            <p>AI Model Evaluation Platform - Three-Tier Continuous Evaluation System</p>
        </div>
    </header>

    <nav class="nav-tabs">
        <button class="nav-tab active" onclick="showTab('dashboard')">Dashboard</button>
        <button class="nav-tab" onclick="showTab('evaluate')">Run Evaluation</button>
        <button class="nav-tab" onclick="showTab('monitoring')">Drift Monitoring</button>
        <button class="nav-tab" onclick="showTab('architecture')">Architecture</button>
    </nav>

    <main class="content">
        <div class="container">
            <!-- Dashboard Tab -->
            <div id="dashboard" class="tab-content active">
                <div class="dashboard-grid">
                    <div class="card trust-score">
                        <h3>Overall Trust Score</h3>
                        <div class="trust-score-value" id="trustScoreValue">87</div>
                        <div class="trust-score-label">High Confidence</div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 87%"></div>
                        </div>
                        <div class="trust-score-breakdown">
                            <div class="tier-score">
                                <div class="tier-score-value" id="tier1Score">92</div>
                                <div class="tier-score-label">Tier 1 (25%)</div>
                            </div>
                            <div class="tier-score">
                                <div class="tier-score-value" id="tier2Score">85</div>
                                <div class="tier-score-label">Tier 2 (55%)</div>
                            </div>
                            <div class="tier-score">
                                <div class="tier-score-value" id="tier3Score">88</div>
                                <div class="tier-score-label">Tier 3 (20%)</div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <h3>System Status</h3>
                        <div style="margin-bottom: 16px;">
                            <span class="status-indicator status-green"></span>
                            <strong>All Systems Operational</strong>
                        </div>
                        <div style="margin-bottom: 12px;">
                            <span class="status-indicator status-green"></span>
                            Tier 1: Automated Checks (&lt;100ms)
                        </div>
                        <div style="margin-bottom: 12px;">
                            <span class="status-indicator status-green"></span>
                            Tier 2: LLM-as-a-Judge (1000+/hr)
                        </div>
                        <div style="margin-bottom: 12px;">
                            <span class="status-indicator status-yellow"></span>
                            Tier 3: Human Review (2 pending)
                        </div>
                        <div>
                            <span class="status-indicator status-green"></span>
                            Drift Monitoring Active
                        </div>
                    </div>

                    <div class="card">
                        <h3>Recent Evaluations</h3>
                        <div id="recentActivity">
                            <div style="margin-bottom: 12px; padding: 12px; background-color: #f8fafc; border-radius: 6px;">
                                <strong>Model v2.3.1 Evaluated</strong><br>
                                <small style="color: #64748b;">Trust Score: 89 ‚Ä¢ 5 minutes ago</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>       
     <!-- Evaluate Tab -->
            <div id="evaluate" class="tab-content">
                <div class="card">
                    <h3>Run Model Evaluation</h3>
                    <form id="evaluationForm">
                        <div class="form-group">
                            <label class="form-label" for="modelInput">Model Input Text</label>
                            <textarea class="form-textarea" id="modelInput" placeholder="Enter the input text..." required>Tell me about the benefits of renewable energy sources.</textarea>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="modelOutput">Model Output</label>
                            <textarea class="form-textarea" id="modelOutput" placeholder="Enter the model's output..." required>Renewable energy sources like solar, wind, and hydro power offer numerous benefits including environmental sustainability, reduced carbon emissions, long-term cost savings, energy independence, and job creation in green technology sectors.</textarea>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="evaluationTier">Evaluation Tier</label>
                            <select class="form-select" id="evaluationTier">
                                <option value="tier1">Tier 1: Automated Checks</option>
                                <option value="tier2" selected>Tier 2: LLM-as-a-Judge</option>
                                <option value="tier3">Tier 3: Human Review</option>
                                <option value="all">All Tiers (Comprehensive)</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="useCase">Use Case Context</label>
                            <select class="form-select" id="useCase">
                                <option value="customer-support">Customer Support</option>
                                <option value="content-generation" selected>Content Generation</option>
                                <option value="code-assistance">Code Assistance</option>
                                <option value="educational">Educational Content</option>
                            </select>
                        </div>

                        <button type="submit" class="btn btn-primary" style="width: 100%;">
                            <span id="evaluateButtonText">Start Evaluation</span>
                            <span id="evaluateButtonLoader" class="loading hidden" style="margin-left: 8px;"></span>
                        </button>
                    </form>

                    <div id="evaluationResults" class="evaluation-results">
                        <h4 style="color: #1e293b; margin-bottom: 16px;">Evaluation Results</h4>
                        <div style="text-align: center; margin-bottom: 20px;">
                            <div style="font-size: 2.5rem; font-weight: 700; color: #059669;" id="resultTrustScore">--</div>
                            <div style="color: #6b7280; margin-bottom: 16px;">Overall Trust Score</div>
                        </div>
                        
                        <div class="dimension-scores" id="dimensionScores">
                            <!-- Results will be populated here -->
                        </div>

                        <div id="detailedAnalysis" style="margin-top: 20px; padding: 16px; background-color: white; border-radius: 8px;">
                            <!-- Analysis will be populated here -->
                        </div>
                    </div>
                </div>
            </div>     
       <!-- Monitoring Tab -->
            <div id="monitoring" class="tab-content">
                <div class="card">
                    <h3>Drift Stability Index (DSI)</h3>
                    <div style="text-align: center; padding: 20px;">
                        <div style="font-size: 3rem; font-weight: 700; color: #f59e0b; margin-bottom: 8px;" id="dsiValue">0.12</div>
                        <div style="color: #6b7280; margin-bottom: 16px;">Current DSI Score</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="dsiProgress" style="width: 40%; background: linear-gradient(90deg, #f59e0b 0%, #d97706 100%);"></div>
                        </div>
                        <p style="color: #92400e; font-size: 0.9rem; margin-top: 12px;">Approaching alert threshold (0.15)</p>
                    </div>
                </div>

                <div class="card">
                    <h3>Dimension Performance Trends</h3>
                    <div class="dimension-scores" id="monitoringDimensions">
                        <div class="dimension-item">
                            <div class="dimension-score" style="color: #059669;">4.2</div>
                            <div class="dimension-name">Factual Accuracy</div>
                            <div style="font-size: 0.75rem; color: #10b981;">‚Üë 2%</div>
                        </div>
                        <div class="dimension-item">
                            <div class="dimension-score" style="color: #f59e0b;">3.6</div>
                            <div class="dimension-name">Safety & Policy</div>
                            <div style="font-size: 0.75rem; color: #f59e0b;">‚Üì 8%</div>
                        </div>
                        <div class="dimension-item">
                            <div class="dimension-score" style="color: #059669;">4.5</div>
                            <div class="dimension-name">Alignment</div>
                            <div style="font-size: 0.75rem; color: #10b981;">‚Üë 1%</div>
                        </div>
                        <div class="dimension-item">
                            <div class="dimension-score" style="color: #059669;">4.1</div>
                            <div class="dimension-name">Tone & Style</div>
                            <div style="font-size: 0.75rem; color: #10b981;">‚Üë 3%</div>
                        </div>
                        <div class="dimension-item">
                            <div class="dimension-score" style="color: #059669;">4.3</div>
                            <div class="dimension-name">Conciseness</div>
                            <div style="font-size: 0.75rem; color: #6b7280;">‚Üí 0%</div>
                        </div>
                    </div>
                </div>

                <div id="driftAlert" class="alert alert-warning" style="display: none;">
                    <h4 style="margin-bottom: 8px;">Drift Alert: Deviation Detected</h4>
                    <p>Safety dimension scores have decreased by 8% over the past 24 hours. Monitoring continues...</p>
                </div>
            </div>   
         <!-- Architecture Tab -->
            <div id="architecture" class="tab-content">
                <div class="card">
                    <h3>Three-Tier Evaluation Architecture</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-top: 20px;">
                        <div style="background: white; border-radius: 8px; padding: 20px; border-left: 4px solid #10b981;">
                            <h4 style="color: #1e293b; margin-bottom: 8px;">Tier 1: Automated Checks</h4>
                            <p style="color: #64748b; font-size: 0.9rem; margin-bottom: 12px;">Continuous, low-latency validation</p>
                            <div style="font-size: 0.875rem; color: #475569; background-color: #f8fafc; padding: 8px 12px; border-radius: 4px;">
                                <strong>Methods:</strong> PII detection, profanity filtering, token limits, ROUGE, BLEU
                            </div>
                            <div style="margin-top: 12px; color: #059669; font-weight: 500;">‚ö° &lt;100ms latency</div>
                        </div>

                        <div style="background: white; border-radius: 8px; padding: 20px; border-left: 4px solid #6366f1;">
                            <h4 style="color: #1e293b; margin-bottom: 8px;">Tier 2: LLM-as-a-Judge</h4>
                            <p style="color: #64748b; font-size: 0.9rem; margin-bottom: 12px;">Scheduled, scalable evaluation</p>
                            <div style="font-size: 0.875rem; color: #475569; background-color: #f8fafc; padding: 8px 12px; border-radius: 4px;">
                                <strong>Dimensions:</strong> Factual Accuracy, Safety, Alignment, Tone, Conciseness
                            </div>
                            <div style="margin-top: 12px; color: #059669; font-weight: 500;">üéØ 1000+ evaluations/hour</div>
                        </div>

                        <div style="background: white; border-radius: 8px; padding: 20px; border-left: 4px solid #f59e0b;">
                            <h4 style="color: #1e293b; margin-bottom: 8px;">Tier 3: Human Review</h4>
                            <p style="color: #64748b; font-size: 0.9rem; margin-bottom: 12px;">On-demand, targeted review</p>
                            <div style="font-size: 0.875rem; color: #475569; background-color: #f8fafc; padding: 8px 12px; border-radius: 4px;">
                                <strong>Features:</strong> Annotation UI, case routing, feedback loop
                            </div>
                            <div style="margin-top: 12px; color: #059669; font-weight: 500;">üéñÔ∏è 20% of outputs</div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3>Trust Score Calculation</h3>
                    <div style="background-color: #f8fafc; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                        <div style="font-family: 'Courier New', monospace; color: #1e293b; font-size: 1.1rem; text-align: center;">
                            Trust Score = 0.25 √ó Tier 1 + 0.55 √ó Tier 2 + 0.20 √ó Tier 3
                        </div>
                    </div>
                    <p style="color: #64748b;">
                        The Trust Score provides a weighted aggregate metric (0-100) that summarizes evaluation results, 
                        prioritizing Tier 2 judgments while integrating quantitative and human-reviewed data.
                    </p>
                </div>

                <div class="card">
                    <h3>LLM-as-a-Judge Evaluation Dimensions</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 16px; margin-top: 16px;">
                        <div style="padding: 16px; background-color: #f0f9ff; border-radius: 8px; border-left: 4px solid #10b981;">
                            <h4 style="color: #1e293b; margin-bottom: 4px;">Factual Accuracy</h4>
                            <p style="color: #64748b; font-size: 0.85rem;">1-5 scale based on verification against Ground Truth</p>
                        </div>
                        <div style="padding: 16px; background-color: #fef3c7; border-radius: 8px; border-left: 4px solid #ef4444;">
                            <h4 style="color: #1e293b; margin-bottom: 4px;">Safety & Policy</h4>
                            <p style="color: #64748b; font-size: 0.85rem;">1-5 scale checking for policy violations</p>
                        </div>
                        <div style="padding: 16px; background-color: #f0f9ff; border-radius: 8px; border-left: 4px solid #6366f1;">
                            <h4 style="color: #1e293b; margin-bottom: 4px;">Alignment</h4>
                            <p style="color: #64748b; font-size: 0.85rem;">1-5 scale evaluating intent understanding</p>
                        </div>
                        <div style="padding: 16px; background-color: #fef3c7; border-radius: 8px; border-left: 4px solid #f59e0b;">
                            <h4 style="color: #1e293b; margin-bottom: 4px;">Tone & Style</h4>
                            <p style="color: #64748b; font-size: 0.85rem;">1-5 scale assessing appropriate tone</p>
                        </div>
                        <div style="padding: 16px; background-color: #f3e8ff; border-radius: 8px; border-left: 4px solid #8b5cf6;">
                            <h4 style="color: #1e293b; margin-bottom: 4px;">Conciseness</h4>
                            <p style="color: #64748b; font-size: 0.85rem;">1-5 scale measuring optimal length</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>  
  <script>
        // Global CEE state management
        const CEE = {
            currentTab: 'dashboard',
            evaluationInProgress: false,
            data: {
                trustScore: 87,
                tierScores: { tier1: 92, tier2: 85, tier3: 88 },
                dimensionScores: {
                    factualAccuracy: 4.2,
                    safetyPolicy: 3.6,
                    alignment: 4.5,
                    toneStyle: 4.1,
                    conciseness: 4.3
                },
                driftStabilityIndex: 0.12
            }
        };

        // Tab navigation
        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.nav-tab').forEach(tab => tab.classList.remove('active'));
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
            
            CEE.currentTab = tabName;
            
            if (tabName === 'monitoring') {
                updateMonitoringData();
            }
        }

        // Evaluation form handling
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('evaluationForm').addEventListener('submit', async function(e) {
                e.preventDefault();
                
                if (CEE.evaluationInProgress) return;
                
                const formData = {
                    modelInput: document.getElementById('modelInput').value,
                    modelOutput: document.getElementById('modelOutput').value,
                    evaluationTier: document.getElementById('evaluationTier').value,
                    useCase: document.getElementById('useCase').value
                };
                
                await runEvaluation(formData);
            });
        });

        // Main evaluation function
        async function runEvaluation(formData) {
            CEE.evaluationInProgress = true;
            
            const button = document.querySelector('#evaluationForm button[type="submit"]');
            const buttonText = document.getElementById('evaluateButtonText');
            const buttonLoader = document.getElementById('evaluateButtonLoader');
            
            buttonText.textContent = 'Evaluating...';
            buttonLoader.classList.remove('hidden');
            button.disabled = true;
            
            try {
                const results = await simulateEvaluation(formData);
                displayEvaluationResults(results);
                updateDashboard(results);
                showAlert('Evaluation completed successfully!', 'success');
            } catch (error) {
                console.error('Evaluation failed:', error);
                showAlert('Evaluation failed. Please try again.', 'error');
            } finally {
                buttonText.textContent = 'Start Evaluation';
                buttonLoader.classList.add('hidden');
                button.disabled = false;
                CEE.evaluationInProgress = false;
            }
        }   
     // Simulate evaluation process
        async function simulateEvaluation(formData) {
            const { modelInput, modelOutput, evaluationTier, useCase } = formData;
            
            const processingTimes = {
                tier1: 500,
                tier2: 2000,
                tier3: 4000,
                all: 6000
            };
            
            await new Promise(resolve => setTimeout(resolve, processingTimes[evaluationTier] || 2000));
            
            return generateEvaluationResults(modelInput, modelOutput, evaluationTier, useCase);
        }

        // Generate realistic evaluation results
        function generateEvaluationResults(input, output, tier, useCase) {
            const outputLength = output.length;
            const wordCount = output.split(' ').length;
            const hasNumbers = /\d/.test(output);
            const hasProfanity = checkForProfanity(output);
            const hasPII = checkForPII(output);
            
            let scores = {
                factualAccuracy: Math.min(5, 3 + (hasNumbers ? 1 : 0) + (output.includes('research') ? 1 : 0)),
                safetyPolicy: hasProfanity || hasPII ? 2 : 5,
                alignment: Math.min(5, 3 + (output.toLowerCase().includes(input.toLowerCase().split(' ')[0]) ? 1 : 0) + (wordCount > 20 ? 1 : 0)),
                toneStyle: Math.min(5, 3 + (useCase === 'educational' && output.includes('benefits') ? 1 : 0) + (wordCount > 30 && wordCount < 100 ? 1 : 0)),
                conciseness: Math.max(1, 5 - Math.floor(wordCount / 50))
            };
            
            // Add randomness for realism
            Object.keys(scores).forEach(key => {
                scores[key] = Math.max(1, Math.min(5, scores[key] + (Math.random() - 0.5) * 0.8));
                scores[key] = Math.round(scores[key] * 10) / 10;
            });
            
            const tier1Score = calculateTier1Score(output);
            const tier2Score = (scores.factualAccuracy + scores.safetyPolicy + scores.alignment + scores.toneStyle + scores.conciseness) / 5 * 20;
            const tier3Score = tier2Score + (Math.random() - 0.5) * 10;
            
            const trustScore = Math.round(0.25 * tier1Score + 0.55 * tier2Score + 0.20 * tier3Score);
            
            return {
                trustScore: Math.max(0, Math.min(100, trustScore)),
                tierScores: {
                    tier1: Math.round(tier1Score),
                    tier2: Math.round(tier2Score),
                    tier3: Math.round(tier3Score)
                },
                dimensionScores: scores,
                analysis: generateAnalysis(scores, output, useCase),
                processingTime: Date.now(),
                tier: tier
            };
        }

        // Calculate Tier 1 score
        function calculateTier1Score(output) {
            let score = 100;
            if (output.length > 16000) score -= 20;
            if (checkForPII(output)) score -= 30;
            if (checkForProfanity(output)) score -= 40;
            if (output.length < 10) score -= 20;
            return Math.max(0, score);
        }

        // Simple PII detection
        function checkForPII(text) {
            const piiPatterns = [
                /\b\d{3}-\d{2}-\d{4}\b/,
                /\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}\b/,
                /\b\d{3}-\d{3}-\d{4}\b/,
                /\b\d{4}\s?\d{4}\s?\d{4}\s?\d{4}\b/
            ];
            return piiPatterns.some(pattern => pattern.test(text));
        }

        // Simple profanity detection
        function checkForProfanity(text) {
            const profanityWords = ['damn', 'hell', 'crap'];
            const lowerText = text.toLowerCase();
            return profanityWords.some(word => lowerText.includes(word));
        }   
     // Generate analysis text
        function generateAnalysis(scores, output, useCase) {
            const strengths = [];
            const improvements = [];
            
            if (scores.factualAccuracy >= 4) strengths.push('factually accurate information');
            if (scores.safetyPolicy >= 4) strengths.push('appropriate safety compliance');
            if (scores.alignment >= 4) strengths.push('good alignment with user intent');
            if (scores.toneStyle >= 4) strengths.push('appropriate tone and style');
            if (scores.conciseness >= 4) strengths.push('optimal length and clarity');
            
            if (scores.factualAccuracy < 3) improvements.push('verify factual claims');
            if (scores.safetyPolicy < 3) improvements.push('review for policy compliance');
            if (scores.alignment < 3) improvements.push('better address user intent');
            if (scores.toneStyle < 3) improvements.push('adjust tone for target audience');
            if (scores.conciseness < 3) improvements.push('improve conciseness');
            
            return {
                strengths: strengths.length > 0 ? strengths.join(', ') : 'Response meets basic requirements',
                improvements: improvements.length > 0 ? improvements.join(', ') : 'Minor refinements could enhance quality'
            };
        }

        // Display evaluation results
        function displayEvaluationResults(results) {
            const resultsDiv = document.getElementById('evaluationResults');
            const trustScoreElement = document.getElementById('resultTrustScore');
            const dimensionScoresContainer = document.getElementById('dimensionScores');
            const analysisContainer = document.getElementById('detailedAnalysis');
            
            trustScoreElement.textContent = results.trustScore;
            
            dimensionScoresContainer.innerHTML = `
                <div class="dimension-item">
                    <div class="dimension-score">${results.dimensionScores.factualAccuracy.toFixed(1)}</div>
                    <div class="dimension-name">Factual Accuracy</div>
                </div>
                <div class="dimension-item">
                    <div class="dimension-score">${results.dimensionScores.safetyPolicy.toFixed(1)}</div>
                    <div class="dimension-name">Safety & Policy</div>
                </div>
                <div class="dimension-item">
                    <div class="dimension-score">${results.dimensionScores.alignment.toFixed(1)}</div>
                    <div class="dimension-name">Alignment</div>
                </div>
                <div class="dimension-item">
                    <div class="dimension-score">${results.dimensionScores.toneStyle.toFixed(1)}</div>
                    <div class="dimension-name">Tone & Style</div>
                </div>
                <div class="dimension-item">
                    <div class="dimension-score">${results.dimensionScores.conciseness.toFixed(1)}</div>
                    <div class="dimension-name">Conciseness</div>
                </div>
            `;
            
            analysisContainer.innerHTML = `
                <h5 style="color: #1e293b; margin-bottom: 8px;">Detailed Analysis</h5>
                <p style="color: #475569; margin-bottom: 8px;"><strong>Strengths:</strong> ${results.analysis.strengths}</p>
                <p style="color: #475569; margin-bottom: 12px;"><strong>Areas for Improvement:</strong> ${results.analysis.improvements}</p>
                <div style="padding: 12px; background-color: #f0f9ff; border-radius: 6px; border: 1px solid #bae6fd;">
                    <strong>Tier Breakdown:</strong> 
                    Tier 1: ${results.tierScores.tier1}/100 | 
                    Tier 2: ${results.tierScores.tier2}/100 | 
                    Tier 3: ${results.tierScores.tier3}/100
                </div>
            `;
            
            resultsDiv.style.display = 'block';
            resultsDiv.scrollIntoView({ behavior: 'smooth' });
        }  
      // Update dashboard with new data
        function updateDashboard(results) {
            CEE.data.trustScore = results.trustScore;
            CEE.data.tierScores = results.tierScores;
            CEE.data.dimensionScores = results.dimensionScores;
            
            document.getElementById('trustScoreValue').textContent = results.trustScore;
            document.getElementById('tier1Score').textContent = results.tierScores.tier1;
            document.getElementById('tier2Score').textContent = results.tierScores.tier2;
            document.getElementById('tier3Score').textContent = results.tierScores.tier3;
            
            const progressFill = document.querySelector('.progress-fill');
            if (progressFill) {
                progressFill.style.width = results.trustScore + '%';
            }
            
            addRecentActivity(`New Evaluation Complete`, `Trust Score: ${results.trustScore} ‚Ä¢ Just now`);
        }

        // Add item to recent activity
        function addRecentActivity(title, subtitle) {
            const recentActivity = document.getElementById('recentActivity');
            if (recentActivity) {
                const newActivity = document.createElement('div');
                newActivity.style.cssText = 'margin-bottom: 12px; padding: 12px; background-color: #f0f9ff; border-radius: 6px; border: 1px solid #bae6fd;';
                newActivity.innerHTML = `
                    <strong>${title}</strong><br>
                    <small style="color: #64748b;">${subtitle}</small>
                `;
                
                recentActivity.insertBefore(newActivity, recentActivity.firstChild);
                
                const activities = recentActivity.querySelectorAll('div');
                if (activities.length > 3) {
                    activities[activities.length - 1].remove();
                }
            }
        }

        // Update monitoring data
        function updateMonitoringData() {
            const dsiValue = document.getElementById('dsiValue');
            const dsiProgress = document.getElementById('dsiProgress');
            
            if (dsiValue && CEE.currentTab === 'monitoring') {
                const newDSI = (CEE.data.driftStabilityIndex + (Math.random() - 0.5) * 0.02).toFixed(3);
                dsiValue.textContent = newDSI;
                
                if (dsiProgress) {
                    dsiProgress.style.width = (parseFloat(newDSI) * 100 / 0.3) + '%';
                }
                
                // Show/hide drift alert based on DSI
                const driftAlert = document.getElementById('driftAlert');
                if (driftAlert && parseFloat(newDSI) > 0.13) {
                    driftAlert.style.display = 'block';
                } else if (driftAlert) {
                    driftAlert.style.display = 'none';
                }
            }
        }

        // Show alert messages
        function showAlert(message, type = 'info') {
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type === 'error' ? 'warning' : 'success'}`;
            alertDiv.textContent = message;
            
            const container = document.querySelector('.container');
            container.insertBefore(alertDiv, container.firstChild);
            
            setTimeout(() => {
                alertDiv.remove();
            }, 5000);
        }

        // Real-time updates simulation
        function startRealTimeUpdates() {
            setInterval(() => {
                if (CEE.currentTab === 'monitoring') {
                    updateMonitoringData();
                }
            }, 5000);
        }

        // Initialize application
        document.addEventListener('DOMContentLoaded', function() {
            console.log('CEE MVP initialized');
            startRealTimeUpdates();
            
            // Add keyboard shortcuts
            document.addEventListener('keydown', function(e) {
                if (e.ctrlKey || e.metaKey) {
                    switch(e.key) {
                        case '1': e.preventDefault(); showTab('dashboard'); break;
                        case '2': e.preventDefault(); showTab('evaluate'); break;
                        case '3': e.preventDefault(); showTab('monitoring'); break;
                        case '4': e.preventDefault(); showTab('architecture'); break;
                    }
                }
            });
            
            setTimeout(() => {
                showAlert('CEE MVP is ready! Try running an evaluation to see the system in action.', 'success');
            }, 1000);
        });
    </script>
</body>
</html>